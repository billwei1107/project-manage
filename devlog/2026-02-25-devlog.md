# 2026-02-25 開發日誌

## 開發規劃 (Planning)
- 完成測試並部署新開發的財務模組 (Financial Module)。
- 紀錄提交與測試結果。
- [新增] 修復財務模組的 Data Sync (新增分類管理與自定義稅率機制)。

## 專案結構 (Project Structure)
(維持原樣，主要新增了 `FinanceCategory` 相關的 Entities、Services、Controllers，以及前端的 `ManageCategoriesModal.tsx`。)

## 進度 (Progress)
- 完成本地測試與 Build。
- 透過 `deploy.exp` 成功自動部署最新的 `master`/`main` 分支至測試伺服器 (54.255.186.244)。
- 確認後端 (Spring Boot) 與前端 (React/Vite) 的 Docker 容器成功重啟並運行正常。
- 實作了 **收支分類動態管理** (Database-backed `FinanceCategory`)，解決了先前前後端因 `Enum` 無法擴展或導致新增記錄失敗的問題，並移除了 Hardcoded 5% 的稅率，讓前端新增時可調整 `taxRate`。

## Git 提交記錄
- **提交時間**: 10:25
- **提交 Hash**: `0ce2d83`
- **提交訊息**: `feat(finance): implement financial module backend and frontend`
  - 新增後端 Financial Module (可自動計算 5% 稅金)
  - 新增前端財務模組頁籤 (圓餅圖視覺化、預算進度條)
  - 修復編譯與 Typo 問題

- **提交時間**: 19:50
- **提交 Hash**: `d203757`
- **提交訊息**: `style(frontend): implement responsive UI overhaul across dashboard layout and components`
  - 修復 `AdminLayout` 與 `ClientLayout` 在小螢幕下的容器寬度溢出與按鈕排列問題。
  - 將 `ProjectDetail` 的 Tabs 標籤切換設置為支援水平滾動 (`scrollable`)。
  - 將 `ProjectDetail` 的 Tabs 標籤切換設置為支援水平滾動 (`scrollable`)。
  - 調整 `ProjectFinance` 財務收入支出的表格容器支援 `overflowX`。
  - 修正所有新增/修改對話框 (如 `AddProjectModal`) 內的網格欄位 (Grid/Stack) 於手機裝置下的彈性斷點對齊。

- **提交時間**: 20:05
- **提交 Hash**: `e956803`
- **提交訊息**: `fix(frontend): remove strict height overrides and vite defaults to prevent background cutoff on scroll`
  - 移除了 Vite 預設的 `index.css` 樣式 (該樣式強制 `body` 的 `display: flex; place-items: center`，導致 MUI 的內容溢出遮蔽)。
  - 將 MUI `theme.ts` 中 `CssBaseline` 對 `html`, `body` 與 `#root` 的 `height: 100%` 強制限制改為 `minHeight: '100vh'`。
  - 修復了網頁往下滑動超過原始螢幕高度後，背景顏色變成全黑的繪製截斷 Bug。

- **提交時間**: 21:55
- **提交 Hash**: `592f17b`
- **提交訊息**: `fix(finance): add missing /v1 namespace to financial records API endpoints`
  - 修復了前端 `ProjectFinance` 與 `AddFinancialRecordModal` 在呼叫 API 時遺漏 `/v1/` 版本前綴，導致請求無法送達後端控制器的問題。
  - 登入遠端 PostgreSQL 容器中手動移除舊版的 Enum 限制條件 (`financial_records_category_check`)，允許動態的自訂分類字串寫入。

- **提交時間**: 22:42
- **提交 Hash**: `932c809`
- **提交訊息**: `style(frontend): make admin topbar opaque`
  - 移除了後台 `AdminLayout` 頂部導覽列 (AppBar) 的半透明與毛玻璃 (`backdropFilter: blur`) 模糊特效。
  - 將導覽列背景顏色改為實體不透明的 `background.paper`。

- **提交時間**: 23:09
- **提交 Hash**: `fb9ce2b`
- **提交訊息**: `feat(frontend): sync financial summary data to project overview tab`
  - 修復了專案「概覽 (Overview)」分頁中「財務概況」卡片的數據無法同步的問題。
  - 現在會直接呼叫 `GET /v1/projects/{id}/finance/summary` 取得最新預算消耗率 (Burn Rate) 與實際支出來涵蓋原本寫死的 `0%` 假象。



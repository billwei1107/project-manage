# 2026-02-26 開發日誌

## 開發規劃 (Planning)
- 修復「新增專案」點擊後無反應的問題 (AddProjectModal 閃退 Bug)。
- 推送所有變更至 GitHub 並完成日誌記錄。

## 專案結構 (Project Structure)
```
.
├── README.md
├── backend/            # Spring Boot Backend
├── deploy.exp          # Deployment script
├── devlog/             # Development logs
├── docker/             # Docker configurations
├── docs/               # Documentation
├── env/                # Environment variables
├── frontend-app/       # Flutter Frontend (Mobile)
├── frontend-web/       # React Frontend (Web)
└── startup_error.log   # Error log
```

## 進度 (Progress)
- **修復 AddProjectModal 閃退 Bug**：發現 `useEffect` 在初次渲染時會觸發 `resetForm()`，而該函式內部包含了 `onClose()`。已將其分離為 `clearFormData()` 函式，確保開啟新專案對話框時不會誤關閉。
- 完成 GitHub 推送與測試伺服器同步。
- **實作帳號管理與登入機制 (Account System)**：
  - 更新 `User` 實體，新增 `employeeId` 與 `username` 用於後續登入識別。
  - 調整 `ApplicationConfig` 與 `AuthService`，實作由信箱改為透過 **信箱、用戶名或員工編號** 進行身份驗證的登入機制。
  - 新增管理員專屬的 `AccountManagement.tsx` 頁面與後端 API，支援列表查詢、新增員工帳號並設定系統預設密碼 (`ERP@123456`)，以及一鍵重設密碼功能。

## Git 提交記錄
- **提交時間**: 01:15
- **提交 Hash**: `e31b723`
- **提交訊息**: `fix(frontend): decouple form reset from modal closing to fix Add Project failure`
  - 分離 `AddProjectModal` 中的清空表單與關閉視窗邏輯。
  - 修正開啟新專案對話框時立刻自動關閉的 Bug。

- **提交時間**: 09:55
- **提交 Hash**: `ed98f24`
- **提交訊息**: `docs: create 2026-02-26 devlog and finalize modal fix`

- **提交時間**: `(10:45)`
- **提交 Hash**: `[待推送]`
- **提交訊息**: `feat(account): implement admin account management and multi-field login`
  - 新增管理員專屬帳號管理介面 (`AccountManagement.tsx`, `AddUserModal.tsx`)。
  - 新增後端 API 支援新增帳號與重設密碼。
  - 調整認證流程允許透過 Email、Username 或 EmployeeID 登入。

- **提交時間**: 13:56
- **提交 Hash**: `05f3bbf`
- **提交訊息**: `feat(auth): implement change password and project access control`
  - 新增「修改密碼」的彈窗與後端 API (`/api/v1/auth/change-password`)。
  - 專案實體新增 `creator_id` 關聯欄位並優化 `ProjectRepository` 查詢。
  - 實作權限控管邏輯：管理員可檢視全部專案，一般員工僅能檢視自己建立或為參與成員的專案。

- **提交時間**: 14:26
- **提交 Hash**: `10e1f8f`
- **提交訊息**: `feat(account): add user account editing capabilities`
  - 後端 `AccountController` 新增 `PUT /api/v1/accounts/{id}` 以支援更新員工資料。
  - 前端建立 `EditUserModal.tsx` 並串接至「帳號管理」頁面的資料表，供管理員修改用戶名及員工編號。

- **提交時間**: 21:17
- **提交 Hash**: `e281bf3`
- **提交訊息**: `feat(calendar): implement calendar backend API and frontend UI grid with AddEventModal`
  - 新增行事曆事件的後端實體 (`Event`)、資料庫操作 (`EventRepository`)、服務邏輯層 (`EventService`) 與 REST API (`EventController` - `/api/v1/events`)。
  - 建立前端自定義月曆畫面的 CSS Grid 佈局與「近期事件」側邊欄 (`Calendar.tsx`)。
  - 新建符合設計稿的「新增事件」彈窗 (`AddEventModal.tsx`)，支援日期區間與優先級等。
  - 完成 Zustand 狀態管理 (`useEventStore.ts`) 串接。

- **提交時間**: 23:45
- **提交 Hash**: `aae94dd`
- **提交訊息**: `feat(calendar): localize Event Modal and Grid, add edit capability and tooltips`
  - 將行事曆畫面與彈窗的所有文字翻譯為繁體中文。
  - 行事曆排版改以「星期日」為一週開始。
  - 在事件方塊加上懸浮提示 (`Tooltip`)，參考蘋果行事曆設計，顯示詳細時間與描述。
  - 新增點擊事件開啟編輯模式，並將「類別」輸入框改為 `<Autocomplete freeSolo>`，支援自定義類別輸入。
